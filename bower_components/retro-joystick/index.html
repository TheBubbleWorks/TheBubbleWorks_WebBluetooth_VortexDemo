<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8">
    <title>Retro-Joystick</title>

    <!-- This whole file is laughable, dont use it as an example. simply a demo folks -->

    <!-- see bower_usage_example.html -->

    <!-- This path is all weird cause of the demo, dont use this kind of path if your using bower components -->
    <script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>

    <!-- This path is all weird cause of the demo, dont use this kind of path if your using bower components -->
    <link rel="import" href="components/retro-joystick-no-bower.html" />

    <link rel="stylesheet" href="demo/styles/retro-joystick-demo.css" />
    <link rel="stylesheet" href="demo/styles/fork-me.css" />

  </head>
  <body>

  <table id="retrostick-data-table">
    <tr><th>name</th><th>value</th></tr>
    <tr><td>angle</td><td id="retrostick-data-table-angle"></td></tr>
    <tr><td>Distance</td><td id="retrostick-data-table-distance"></td></tr>
  </table>

  <script type="text/javascript" src="./demo/js/jquery.js" ></script>
  <script type="text/javascript" src="./demo/js/TyrannosaurusSprite.js"></script>
  <script type="text/javascript" src="./demo/js/QuetzalcoatlusSprite.js"></script>

  <retro-joystick class="tyrannosaurusStick"></retro-joystick>
  <retro-joystick class="quetzalcoatlusStick"></retro-joystick>

  <script type="text/javascript">
    $(document).ready(function () {

      var retroJoyStick1 = $(".tyrannosaurusStick")[0];

      var retroJoyStick2 = $(".quetzalcoatlusStick")[0];

      var distance1 = 0;
      var angle1 = 0;
      var retroJoyStick1Obj;
      // When joystick has changed position
      retroJoyStick1.on('change', function (stick) {
        // keep track of distance
        distance1 = stick.distance;
        // keep track of angle
        angle1 = stick.angle
        // notate when angle / distance changes
        $('#retrostick-data-table-angle').html(angle1);
        $('#retrostick-data-table-distance').html(distance1);
        retroJoyStick1Obj = stick;

      });


      var distance2 = 0;
      var angle2 = 0;
      var retroJoyStick2Obj;
      // When joystick has changed position
      retroJoyStick2.on('change', function (stick) {
        // keep track of distance
        distance2 = stick.distance
        // keep track of angle
        angle2 = stick.angle
        // notate when angle / distance changes
        $('#retrostick-data-table-angle').html(angle2);
        $('#retrostick-data-table-distance').html(distance2);
        retroJoyStick2Obj = stick;
      });

      var dinosaur1 = new TyrannosaurusSprite();
      var dinosaur2 = new QuetzalcoatlusSprite();

      function animateDinosaur() {

        var dinosaurPos;

        // according to joystick1, how much should the nyan dinosaur move?
        if (retroJoyStick1Obj) {
          var positionAdjustment1 = retroJoyStick1Obj.getPositionAdjustment();
          if (positionAdjustment1.x || positionAdjustment1.y) {
            dinosaurPos = dinosaur1.position();
            dinosaur1.css('left', dinosaurPos.left + (positionAdjustment1.x));
            dinosaur1.css('top', dinosaurPos.top + (positionAdjustment1.y));
          }
        }

        // according to joystick2, how much should the nyan dinosaur move?
        if (retroJoyStick2Obj) {
          var positionAdjustment2 = retroJoyStick2Obj.getPositionAdjustment();
          if (positionAdjustment2.x || positionAdjustment2.y) {
            dinosaurPos = dinosaur2.position();
            dinosaur2.css('left', dinosaurPos.left + (positionAdjustment2.x));
            dinosaur2.css('top', dinosaurPos.top + (positionAdjustment2.y));
          }
        }

        requestAnimationFrame(animateDinosaur);
      }

      requestAnimationFrame(animateDinosaur);

      // For playing around with
      window.retroJoyStick1 = retroJoyStick1;
  });

  </script>

<div class="github-fork-ribbon-wrapper right">
    <div class="github-fork-ribbon">
      <a href="https://github.com/deshawnbw/retro-joystick">Fork me on GitHub</a>
    </div>
  </div>
  </body>
</html>
